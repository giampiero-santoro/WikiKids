<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ« I Tuoi Polmoni Magici! ğŸ’¨</title>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@600;700&family=Quicksand:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #38BDF8;
            --secondary: #4ECDC4;
            --accent: #FFE66D;
            --sky: #7DD3FC;
            --deep: #0284C7;
            --light: #E0F2FE;
            --purple: #A78BFA;
        }

        body {
            font-family: 'Quicksand', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            position: relative;
            overflow-x: hidden;
        }

        .bubble {
            position: fixed;
            border-radius: 50%;
            background: rgba(255,255,255,0.1);
            animation: float 8s infinite ease-in-out;
            pointer-events: none;
            z-index: 0;
        }
        @keyframes float {
            0%,100% { transform: translateY(0) rotate(0deg); }
            50%      { transform: translateY(-20px) rotate(180deg); }
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            z-index: 1;
        }

        /* ===== HEADER ===== */
        header {
            text-align: center;
            padding: 40px 20px;
            background: linear-gradient(135deg, var(--deep), var(--primary));
            border-radius: 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            margin-bottom: 40px;
            animation: slideDown 1s ease-out, breathe 4s infinite ease-in-out;
        }
        @keyframes slideDown {
            from { transform: translateY(-100px); opacity: 0; }
            to   { transform: translateY(0);      opacity: 1; }
        }
        @keyframes breathe {
            0%,100% { transform: scale(1);    }
            50%     { transform: scale(1.03); }
        }

        h1 {
            font-family: 'Fredoka', sans-serif;
            font-size: 4rem;
            font-weight: 700;
            color: white;
            text-shadow: 4px 4px 0 rgba(0,0,0,0.3);
            letter-spacing: 2px;
            margin-bottom: 10px;
        }
        .subtitle {
            font-size: 1.5rem;
            color: var(--accent);
            font-weight: 700;
        }

        /* ===== TABS ===== */
        .tabs {
            display: flex;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
            justify-content: center;
        }
        .tab {
            padding: 15px 30px;
            background: white;
            border: none;
            border-radius: 20px;
            font-family: 'Quicksand', sans-serif;
            font-weight: 700;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        .tab:hover {
            transform: translateY(-5px) scale(1.05);
            box-shadow: 0 10px 25px rgba(0,0,0,0.3);
        }
        .tab.active {
            background: linear-gradient(135deg, var(--deep), var(--primary));
            color: white;
            transform: scale(1.1);
        }

        /* ===== CONTENT PANELS ===== */
        .content {
            display: none;
            animation: fadeIn 0.5s ease-in;
        }
        .content.active { display: block; }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to   { opacity: 1; transform: translateY(0);    }
        }

        /* ===== CARDS ===== */
        .card {
            background: white;
            border-radius: 25px;
            padding: 30px;
            margin-bottom: 25px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
            transition: transform 0.3s ease;
        }
        .card:hover { transform: translateY(-5px); }

        .card h2 {
            font-family: 'Fredoka', sans-serif;
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--deep);
            margin-bottom: 20px;
            text-shadow: 2px 2px 0 rgba(0,0,0,0.08);
        }
        .card h3 {
            font-size: 1.8rem;
            color: var(--secondary);
            margin: 22px 0 10px;
            font-weight: 700;
        }
        .card p {
            font-size: 1.2rem;
            line-height: 1.8;
            color: #333;
            margin-bottom: 15px;
        }
        .card ul {
            margin-left: 30px;
            font-size: 1.2rem;
            line-height: 1.8;
            color: #333;
        }
        .card ul li { margin-bottom: 10px; }

        /* ===== FUN FACT ===== */
        .fun-fact {
            background: linear-gradient(135deg, var(--deep), var(--primary));
            color: white;
            padding: 25px;
            border-radius: 20px;
            margin: 20px 0;
            border-left: 8px solid var(--accent);
            font-size: 1.2rem;
            font-weight: 600;
        }
        .fun-fact::before {
            content: "ğŸ’¡ Lo sapevi?";
            display: block;
            font-family: 'Fredoka', sans-serif;
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 10px;
        }

        /* ===== EXPLORE: interactive diagram ===== */
        .explore-area {
            position: relative;
            min-height: 780px;
            background: linear-gradient(180deg, #E0F2FE 0%, #BAE6FD 100%);
            border-radius: 25px;
            padding: 30px;
            margin: 20px 0;
        }

        .organ {
            position: absolute;
            cursor: pointer;
            transition: all 0.3s ease;
            padding: 14px 18px;
            border-radius: 18px;
            background: rgba(255,255,255,0.92);
            border: 3px solid transparent;
            font-weight: 700;
            font-size: 1.05rem;
            text-align: center;
            line-height: 1.3;
            user-select: none;
        }
        .organ:hover {
            transform: scale(1.12);
            border-color: var(--deep);
            box-shadow: 0 10px 30px rgba(2,132,199,0.45);
            z-index: 10;
        }
        .organ.clicked {
            background: var(--accent);
            animation: pop 0.45s ease;
        }
        @keyframes pop {
            0%,100% { transform: scale(1);   }
            50%     { transform: scale(1.18); }
        }

        /* positions */
        .o-naso       { top:30px;  left:50%; transform:translateX(-50%); background:#FFDEE9; }
        .o-trachea    { top:120px; left:50%; transform:translateX(-50%); background:#E1BEE7; }
        .o-bronchi    { top:220px; left:50%; transform:translateX(-50%); background:#D1C4E9; }
        .o-polmone-sx { top:340px; left:14%; background:#7DD3FC; width:160px; height:200px; border-radius:50% 50% 45% 45%; display:flex; align-items:center; justify-content:center; font-size:1.2rem; }
        .o-polmone-dx { top:340px; right:14%; background:#7DD3FC; width:160px; height:200px; border-radius:50% 50% 45% 45%; display:flex; align-items:center; justify-content:center; font-size:1.2rem; }
        .o-alveoli    { top:460px; left:50%; transform:translateX(-50%); background:#BAE6FD; }
        .o-diaframma  { top:590px; left:50%; transform:translateX(-50%); background:#A5F3FC; width:260px; border-radius:50%; padding:22px; font-size:1.15rem; }

        .info-box {
            position: absolute;
            background: white;
            border: 4px solid var(--deep);
            border-radius: 20px;
            padding: 20px;
            max-width: 320px;
            display: none;
            box-shadow: 0 15px 50px rgba(0,0,0,0.28);
            z-index: 100;
            animation: popIn 0.3s ease;
        }
        @keyframes popIn {
            from { transform: scale(0); }
            to   { transform: scale(1); }
        }
        .info-box.show { display: block; }
        .info-box h4 {
            font-family: 'Fredoka', sans-serif;
            font-size: 1.7rem;
            font-weight: 700;
            color: var(--deep);
            margin-bottom: 8px;
        }
        .info-box p { font-size: 1.05rem; margin-bottom: 6px; color:#333; }

        /* ===== QUIZ ===== */
        .quiz-container {
            background: linear-gradient(135deg, var(--deep), var(--primary));
            padding: 40px;
            border-radius: 25px;
            color: white;
        }
        .quiz-question {
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 25px;
        }
        .quiz-options { display: grid; gap: 15px; }
        .quiz-option {
            background: white;
            color: #333;
            padding: 20px;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1.2rem;
            font-weight: 600;
            border: 3px solid transparent;
        }
        .quiz-option:hover {
            transform: translateX(10px);
            border-color: var(--accent);
        }
        .quiz-option.correct {
            background: #4CAF50; color: white;
            animation: celebrate 0.6s ease;
        }
        .quiz-option.wrong {
            background: #F44336; color: white;
            animation: shake 0.5s ease;
        }
        @keyframes celebrate {
            0%,100% { transform: rotate(0deg); }
            25%     { transform: rotate(-5deg); }
            75%     { transform: rotate(5deg);  }
        }
        @keyframes shake {
            0%,100% { transform: translateX(0);    }
            25%     { transform: translateX(-10px); }
            75%     { transform: translateX(10px);  }
        }
        .score {
            text-align: center;
            font-size: 2rem;
            margin-top: 20px;
            font-weight: 700;
        }

        /* ===== MEMORY GAME ===== */
        .memory-game {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            padding: 30px;
            background: white;
            border-radius: 25px;
        }
        .memory-card {
            aspect-ratio: 1;
            background: linear-gradient(135deg, var(--deep), var(--primary));
            border-radius: 15px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            transition: transform 0.4s ease;
            transform-style: preserve-3d;
            position: relative;
        }
        .memory-card:hover { transform: scale(1.05); }
        .memory-card.flipped { transform: rotateY(180deg); }
        .memory-card .front,
        .memory-card .back {
            position: absolute;
            width: 100%; height: 100%;
            backface-visibility: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 15px;
        }
        .memory-card .back {
            background: white;
            transform: rotateY(180deg);
        }

        /* ===== BUTTONS ===== */
        button.btn {
            background: linear-gradient(135deg, var(--deep), var(--primary));
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 1.2rem;
            font-weight: 700;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            font-family: 'Quicksand', sans-serif;
        }
        button.btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.4);
        }

        .congrats {
            text-align: center;
            font-size: 2.8rem;
            margin: 30px 0;
            animation: rainbow 3s infinite;
        }
        @keyframes rainbow {
            0%   { color: #38BDF8; }
            25%  { color: #4ECDC4; }
            50%  { color: #FFE66D; }
            75%  { color: #A78BFA; }
            100% { color: #38BDF8; }
        }

        /* ===== FOOTER ===== */
        footer {
            text-align: center;
            padding: 30px 20px;
            margin-top: 50px;
            background: rgba(255,255,255,0.1);
            border-radius: 20px;
            color: white;
            font-size: 0.9rem;
        }
        footer p { margin-bottom: 10px; }
        footer a { color: var(--accent); text-decoration: none; font-weight: 700; }

        /* ===== RESPONSIVE ===== */
        @media (max-width: 768px) {
            h1 { font-size: 2.5rem; }
            .subtitle { font-size: 1.2rem; }
            .explore-area { min-height: 680px; }
            .o-polmone-sx { width:120px; height:160px; left:8%; }
            .o-polmone-dx { width:120px; height:160px; right:8%; }
            .memory-game { grid-template-columns: repeat(3,1fr); }
        }
    
        /* â”€â”€ nav bar (back + home) â”€â”€ */
        .wk-nav {
            position: fixed;
            top: 18px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 9999;
            display: flex;
            gap: 12px;
            animation: navSlideDown 0.6s cubic-bezier(0.175,0.885,0.32,1.275) both;
        }
        @keyframes navSlideDown {
            from { transform: translateX(-50%) translateY(-60px); opacity:0; }
            to   { transform: translateX(-50%) translateY(0);     opacity:1; }
        }
        .wk-nav a {
            display: flex;
            align-items: center;
            gap: 8px;
            text-decoration: none;
            color: white;
            font-family: 'Quicksand', sans-serif;
            font-weight: 700;
            font-size: 1rem;
            padding: 10px 20px;
            border-radius: 50px;
            background: rgba(30, 30, 60, 0.55);
            backdrop-filter: blur(14px);
            -webkit-backdrop-filter: blur(14px);
            border: 1px solid rgba(255,255,255,0.18);
            box-shadow: 0 4px 20px rgba(0,0,0,0.25);
            transition: all 0.3s ease;
            user-select: none;
        }
        .wk-nav a:hover {
            background: rgba(30, 30, 60, 0.78);
            transform: translateY(-2px);
            box-shadow: 0 6px 28px rgba(0,0,0,0.35);
        }
        .wk-nav a:active {
            transform: translateY(0px);
        }
        .wk-nav .nav-icon { font-size: 1.2rem; line-height:1; }
    </style>
</head>
<body>

<div class="bubble" style="width:100px;height:100px;top:10%;left:10%;"></div>
<div class="bubble" style="width:150px;height:150px;top:60%;left:80%;animation-delay:2s;"></div>
<div class="bubble" style="width:80px;height:80px;top:80%;left:20%;animation-delay:4s;"></div>
<div class="bubble" style="width:120px;height:120px;top:30%;left:70%;animation-delay:1s;"></div>

    <!-- back / home nav -->
    <nav class="wk-nav">
        <a href="javascript:history.back()" aria-label="Torna indietro">
            <span class="nav-icon">â†</span> Indietro
        </a>
        <a href="index_unified.html" aria-label="Homepage">
            <span class="nav-icon">ğŸ </span> Home
        </a>
    </nav>

<div class="container">

    <!-- HEADER -->
    <header>
        <h1>ğŸ« I TUOI POLMONI MAGICI! ğŸ’¨</h1>
        <p class="subtitle">Scopri come respiri senza nemmeno pensarci!</p>
    </header>

    <!-- TABS -->
    <div class="tabs">
        <button class="tab active" onclick="showTab('impara',this)">ğŸ“š Impara</button>
        <button class="tab"        onclick="showTab('esplora',this)">ğŸ” Esplora</button>
        <button class="tab"        onclick="showTab('quiz',this)">ğŸ¯ Quiz</button>
        <button class="tab"        onclick="showTab('gioca',this)">ğŸ® Gioca</button>
    </div>

    <!-- ============================================================ TAB: IMPARA ============================================================ -->
    <div id="impara" class="content active">

        <div class="card">
            <h2>ğŸŒ¬ï¸ I Polmoni â€“ Le Sacche d'Aria del Corpo!</h2>
            <p>Hai mai notato che respiri senza nemmeno pensarci? Ãˆ tutto merito dei tuoi <strong>polmoni</strong>! Sono due organi a forma di spugna che siedono dentro la tua cassa toracica e lavorano 24 ore su 24, ogni singolo giorno della tua vita, per portare l'<strong>ossigeno</strong> nel sangue e buttare fuori l'<strong>anidride carbonica</strong> (i rifiuti delle tue cellule).</p>
            <p>Il polmone <strong>destro</strong> Ã¨ un po' piÃ¹ grande di quello sinistro: ha 3 lobi (parti), mentre quello sinistro ne ha solo 2, perchÃ© deve fare posto al cuore! ğŸ«€</p>

            <div class="fun-fact">
                In un giorno respiri circa 20.000 volte e inspiri quasi 10.000 litri d'aria! Ãˆ come riempire 50 bottiglioni da 200 litri! ğŸ–ï¸
            </div>
        </div>

        <div class="card">
            <h3>ğŸ›¤ï¸ Il Percorso dell'Aria â€“ Dal Naso agli Alveoli!</h3>
            <p>Ogni volta che inspiri, l'aria fa un viaggio incredibile prima di arrivare ai polmoni. Ecco le tappe:</p>

            <p>1ï¸âƒ£ <strong>ğŸ‘ƒ NASO (o bocca)</strong> â€“ L'aria entra qui. Nel naso viene <em>filtrata</em> (i peli catturano la polvere), <em>riscaldata</em> e <em>umidificata</em> per non seccare i polmoni.</p>
            <p>2ï¸âƒ£ <strong>ğŸ—£ï¸ FARINGE</strong> â€“ Il corridoio comune tra naso/bocca e polmoni. Da qui passa anche il cibo!</p>
            <p>3ï¸âƒ£ <strong>ğŸ¤ LARINGE</strong> â€“ Qui ci sono le corde vocali: Ã¨ grazie a loro che puoi parlare e cantare!</p>
            <p>4ï¸âƒ£ <strong>ğŸ•³ï¸ TRACHEA</strong> â€“ Un tubo rigido lungo 12 cm che porta l'aria verso i polmoni. Ãˆ protetta da anelli di cartilagine come gli anelli di un'armatura!</p>
            <p>5ï¸âƒ£ <strong>ğŸŒ³ BRONCHI</strong> â€“ La trachea si divide in due bronchi (uno per polmone). Poi i bronchi si dividono ancora e ancora in tanti piccoli <strong>bronchioli</strong> â€“ come un albero che fa sempre piÃ¹ rami!</p>
            <p>6ï¸âƒ£ <strong>ğŸ«§ ALVEOLI</strong> â€“ Le destinazioni finali! Sono minuscole sacchettine d'aria (ne hai circa 300 milioni!) dove avviene lo scambio tra ossigeno e anidride carbonica.</p>

            <div class="fun-fact">
                Se aprissi tutti gli alveoli e li stendessi piatti, coprirebbero una superficie grande come un campo da tennis! ğŸ¾
            </div>
        </div>

        <div class="card">
            <h3>ğŸ”„ Lo Scambio dei Gas â€“ La Magia degli Alveoli!</h3>
            <p>Gli alveoli sono le stelle della storia! Ogni alveolo Ã¨ una sacchettina cosÃ¬ piccola che ci entrano solo pochissime cellule. Le pareti sono <em>ultrasottili</em> e attorno a ogni alveolo ci sono <strong>capillari</strong> (vaselini di sangue microscopici). Ecco cosa succede:</p>

            <p>ğŸŸ¢ <strong>L'ossigeno</strong> nell'aria dentro l'alveolo attraversa la parete e entra nel sangue.</p>
            <p>ğŸŸ£ <strong>L'anidride carbonica</strong> nel sangue attraversa la parete nell'altra direzione e finisce nell'alveolo.</p>
            <p>ğŸ’¨ Quando espi, l'anidride carbonica esce dai polmoni attraverso lo stesso percorso (alveoli â†’ bronchioli â†’ bronchi â†’ trachea â†’ naso/bocca).</p>

            <div class="fun-fact">
                Questo scambio avviene in meno di mezzo secondo! I tuoi polmoni sono i piÃ¹ veloci trasportatori del mondo! âš¡
            </div>
        </div>

        <div class="card">
            <h3>ğŸ’ª Il Diaframma â€“ Il Muscolo Segreto!</h3>
            <p>I polmoni non si "gonfianoË® da soli! Il vero eroe della respirazione Ã¨ il <strong>diaframma</strong>: un muscolo grande e piatto che separa il petto dallo stomaco, a forma di cupola.</p>

            <p>ğŸ“ <strong>Quando INSPIRI</strong>: il diaframma si contrae e scende verso il basso â†’ la cassa toracica si allarga â†’ i polmoni si espandono â†’ l'aria entra!</p>
            <p>ğŸ“ <strong>Quando ESPIRI</strong>: il diaframma si rilassa e risale â†’ la cassa toracica si riduce â†’ i polmoni si comprimono â†’ l'aria esce!</p>
            <p>Il diaframma da solo Ã¨ responsabile del <strong>70%</strong> della respirazione!</p>

            <div class="fun-fact">
                Il singhiozzo Ã¨ una contrazione incontrollata del diaframma! Quando si contrae di colpo, inspiri aria di colpo e le corde vocali si chiudono â†’ HIC! ğŸ˜‚
            </div>
        </div>

        <div class="card">
            <h3>ğŸ›¡ï¸ I Super Poteri dei Polmoni!</h3>
            <p>Oltre a respirare, i tuoi polmoni fanno altre cose incredibili:</p>
            <ul>
                <li>ğŸ§ª <strong>Equilibrio acido-base</strong> â€“ Aiutano a mantenere il pH del sangue corretto (insieme ai reni).</li>
                <li>ğŸ­ <strong>Produzione di sostanze</strong> â€“ Producono enzimi che aiutano a regolare la pressione del sangue.</li>
                <li>ğŸ§¹ <strong>Filtro</strong> â€“ Catturano i microscopici grumi di sangue prima che arrivino al cuore.</li>
                <li>ğŸ›¡ï¸ <strong>Protezione del cuore</strong> â€“ Come due cuscini morbidi che circondano il cuore!</li>
            </ul>
        </div>

        <div class="card">
            <h3>ğŸŒ Come Respirano Gli Altri Animali?</h3>
            <p>Non tutti gli animali respirano come noi! Ecco alcuni esempi divertenti:</p>
            <ul>
                <li>ğŸŸ <strong>Pesci</strong> â€“ Respirano con le <em>branchie</em>, che filtrano l'ossigeno dall'acqua. Alcuni pesci hanno anche polmoni primitivi!</li>
                <li>ğŸ¸ <strong>Rane</strong> â€“ Da adulte respirano sia con i polmoni che con la <em>pelle</em>! La loro pelle deve restare sempre umida.</li>
                <li>ğŸ•·ï¸ <strong>Ragni e scorpioni</strong> â€“ Hanno polmoni speciali chiamati <em>polmoni a libro</em>, che hanno foglie di sangue su cui avviene lo scambio.</li>
                <li>ğŸ¦ <strong>Uccelli</strong> â€“ I loro polmoni sono super efficienti: l'aria passa in una sola direzione e sfruttano anche delle sacche d'aria extra. Per questo possono volare a quote altissime!</li>
            </ul>

            <div class="fun-fact">
                Un'aquila puÃ² volare a 5.000 metri d'altezza, dove l'aria ha la metÃ  dell'ossigeno! I polmoni degli uccelli sono incredibili! ğŸ¦…
            </div>
        </div>

        <div class="card">
            <h2>ğŸŒŸ CuriositÃ  Incredibili!</h2>
            <ul>
                <li>ğŸ« Il polmone destro ha 3 lobi, quello sinistro solo 2 (per il cuore!)</li>
                <li>ğŸ’¨ Respiri circa 20.000 volte al giorno senza nemmeno rendertene conto!</li>
                <li>ğŸ§ª Gli alveoli, se aperti, coprirebbero un campo da tennis</li>
                <li>ğŸ’ª Il diaframma gestisce il 70% della respirazione</li>
                <li>â±ï¸ Lo scambio di gas in un alveolo dura meno di mezzo secondo</li>
                <li>ğŸŒ¬ï¸ Un adulto inspira circa 10.000 litri d'aria ogni giorno</li>
                <li>ğŸ˜‚ Il singhiozzo Ã¨ colpa del diaframma!</li>
                <li>ğŸ¦ Gli uccelli respirano in modo unidirezionale per essere piÃ¹ efficienti</li>
            </ul>
        </div>
    </div>

    <!-- ============================================================ TAB: ESPLORA ============================================================ -->
    <div id="esplora" class="content">
        <div class="card">
            <h2>ğŸ” Esplora il Viaggio dell'Aria!</h2>
            <p>Clicca su ogni parte per scoprire cosa succede durante una respirazione!</p>

            <div class="explore-area">
                <!-- clickable organs -->
                <div class="organ o-naso"       onclick="showInfo('naso',this)">ğŸ‘ƒ NASO</div>
                <div class="organ o-trachea"    onclick="showInfo('trachea',this)">ğŸ•³ï¸ TRACHEA</div>
                <div class="organ o-bronchi"    onclick="showInfo('bronchi',this)">ğŸŒ³ BRONCHI</div>
                <div class="organ o-polmone-sx" onclick="showInfo('polmone',this)">ğŸ« POLMONE<br>SINISTRO</div>
                <div class="organ o-polmone-dx" onclick="showInfo('polmone',this)">ğŸ« POLMONE<br>DESTRO</div>
                <div class="organ o-alveoli"    onclick="showInfo('alveoli',this)">ğŸ«§ ALVEOLI</div>
                <div class="organ o-diaframma"  onclick="showInfo('diaframma',this)">ğŸ’ª DIAFRAMMA</div>

                <!-- info boxes -->
                <div id="info-naso" class="info-box" style="top:10px; right:30px;">
                    <h4>ğŸ‘ƒ IL NASO</h4>
                    <p>ğŸ§¹ Filtra polvere e batteri con i peli</p>
                    <p>ğŸŒ¡ï¸ Riscalda l'aria alla temperatura del corpo</p>
                    <p>ğŸ’§ Umidifica l'aria per i polmoni</p>
                    <p>ğŸ‘ƒ E ovviamenteâ€¦ senti gli odori!</p>
                </div>

                <div id="info-trachea" class="info-box" style="top:100px; right:30px;">
                    <h4>ğŸ•³ï¸ LA TRACHEA</h4>
                    <p>ğŸ“ Lunga circa 12 cm</p>
                    <p>ğŸ›¡ï¸ Protetta da anelli di cartilagine</p>
                    <p>ğŸšš Porta l'aria dai bronchi ai polmoni</p>
                    <p>ğŸ¤§ Se si ostruisce Ã¨ un'emergenza!</p>
                </div>

                <div id="info-bronchi" class="info-box" style="top:210px; right:30px;">
                    <h4>ğŸŒ³ I BRONCHI</h4>
                    <p>ğŸ”€ La trachea si divide in 2 bronchi</p>
                    <p>ğŸŒ¿ Si dividono ancora in bronchioli</p>
                    <p>ğŸŒ² Come un albero con migliaia di rami!</p>
                    <p>ğŸ¯ Ogni ramo porta aria a un alveolo</p>
                </div>

                <div id="info-polmone" class="info-box" style="top:320px; right:30px;">
                    <h4>ğŸ« I POLMONI</h4>
                    <p>ğŸ§½ Hanno la consistenza di una spugna</p>
                    <p>ğŸ“ Il destro Ã¨ piÃ¹ grande (3 lobi vs 2)</p>
                    <p>ğŸ«€ Il sinistro fa posto al cuore</p>
                    <p>ğŸ›¡ï¸ Protetti dalle costole come un'armatura</p>
                </div>

                <div id="info-alveoli" class="info-box" style="top:450px; right:30px;">
                    <h4>ğŸ«§ GLI ALVEOLI</h4>
                    <p>ğŸ”¢ Ne hai circa 300 milioni!</p>
                    <p>ğŸ”„ Qui avviene lo scambio Oâ‚‚ â†” COâ‚‚</p>
                    <p>â±ï¸ Lo scambio dura meno di 0,5 secondi</p>
                    <p>ğŸ“ Aperti coprirebbero un campo da tennis!</p>
                </div>

                <div id="info-diaframma" class="info-box" style="top:580px; right:30px;">
                    <h4>ğŸ’ª IL DIAFRAMMA</h4>
                    <p>ğŸ‹ï¸ Muscolo a forma di cupola</p>
                    <p>ğŸ“Š Gestisce il 70% della respirazione</p>
                    <p>â¬‡ï¸ Si contrae â†’ aria entra</p>
                    <p>ğŸ˜‚ Le sue contrazioni spasmodiche = singhiozzo!</p>
                </div>
            </div>
        </div>
    </div>

    <!-- ============================================================ TAB: QUIZ ============================================================ -->
    <div id="quiz" class="content">
        <div class="card">
            <div class="quiz-container">
                <h2 style="color:white;margin-bottom:30px;">ğŸ¯ Metti alla Prova le Tue Conoscenze!</h2>
                <div id="quiz-content">
                    <div class="quiz-question" id="question"></div>
                    <div class="quiz-options"  id="options"></div>
                </div>
                <div class="score" id="score">Punteggio: 0/0</div>
                <button class="btn" onclick="resetQuiz()" style="margin-top:20px;">ğŸ”„ Ricomincia Quiz</button>
            </div>
        </div>
    </div>

    <!-- ============================================================ TAB: GIOCA ============================================================ -->
    <div id="gioca" class="content">
        <div class="card">
            <h2>ğŸ® Memory Game â€“ Trova le Coppie!</h2>
            <p>Trova le coppie a tema respirazione! Clicca su due carte per girarle.</p>
            <div class="memory-game" id="memory-game"></div>
            <div style="text-align:center;margin-top:20px;">
                <button class="btn" onclick="initMemoryGame()">ğŸ”„ Nuova Partita</button>
                <div id="moves" style="margin-top:15px;font-size:1.5rem;font-weight:700;">Mosse: 0</div>
            </div>
        </div>

        <div class="card" style="margin-top:30px;">
            <h2>ğŸ¨ Scrivi e Impara!</h2>
            <p>Cosa hai imparato oggi sui polmoni? Scrivi qui sotto!</p>
            <textarea style="width:100%;height:150px;font-size:1.2rem;padding:15px;border-radius:15px;border:3px solid var(--secondary);font-family:'Quicksand',sans-serif;" placeholder="Scrivi qui la cosa piÃ¹ interessante che hai imparato oggi sui polmoni! ğŸ‰"></textarea>
        </div>
    </div>

    <!-- FOOTER -->
    <footer>
        <p>ğŸ“š Informazioni scientifiche basate su contenuti di <a href="https://it.wikipedia.org/wiki/Polmone" target="_blank">Wikipedia</a></p>
        <p style="font-size:0.8rem;opacity:0.8;">Contenuti rilasciati sotto licenza Creative Commons Attribution-ShareAlike 3.0</p>
        <p style="margin-top:15px;font-size:1.2rem;">ğŸ’¡ Creato per imparare divertendosi! ğŸ‰</p>
    </footer>

</div><!-- /container -->

<script>
/* ===== TABS ===== */
function showTab(tabName, btn) {
    document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
    document.querySelectorAll('.content').forEach(c => c.classList.remove('active'));
    btn.classList.add('active');
    document.getElementById(tabName).classList.add('active');
}

/* ===== EXPLORE ===== */
let currentInfoBox = null;

function showInfo(id, el) {
    const box = document.getElementById('info-' + id);
    if (currentInfoBox && currentInfoBox !== box) currentInfoBox.classList.remove('show');

    if (box.classList.contains('show')) {
        box.classList.remove('show');
        currentInfoBox = null;
    } else {
        box.classList.add('show');
        currentInfoBox = box;
    }
    el.classList.add('clicked');
    setTimeout(() => el.classList.remove('clicked'), 450);
}

/* ===== QUIZ ===== */
const quizQuestions = [
    {
        question: "Quante volte respiri in un giorno?",
        options: ["Circa 5.000", "Circa 10.000", "Circa 20.000", "Circa 50.000"],
        correct: 2
    },
    {
        question: "Cosa fanno gli alveoli?",
        options: ["Pompano il sangue", "Filtrano l'aria", "Scambiano ossigeno e anidride carbonica", "Producono enzimi"],
        correct: 2
    },
    {
        question: "Quanti lobi ha il polmone destro?",
        options: ["1", "2", "3", "4"],
        correct: 2
    },
    {
        question: "Quale muscolo Ã¨ responsabile del 70% della respirazione?",
        options: ["Il diaframma", "Il bicipite", "Il quadricipite", "Il grande gluteo"],
        correct: 0
    },
    {
        question: "Cosa succede nel naso prima che l'aria raggiunga i polmoni?",
        options: ["L'aria viene riscaldata e filtrata", "L'aria viene raffreddata", "Niente, passa dritta", "L'aria viene compressa"],
        correct: 0
    },
    {
        question: "Quanti alveoli hai nei tuoi polmoni?",
        options: ["Circa 1.000", "Circa 100.000", "Circa 300 milioni", "Circa 1 miliardo"],
        correct: 2
    },
    {
        question: "PerchÃ© il polmone sinistro Ã¨ piÃ¹ piccolo?",
        options: ["Ãˆ piÃ¹ vecchio", "Fa posto al cuore", "Ãˆ malato", "Ãˆ una leggenda"],
        correct: 1
    },
    {
        question: "Cosa causa il singhiozzo?",
        options: ["Una contrazione del cuore", "Una contrazione del diaframma", "Un problema nei polmoni", "La tosse"],
        correct: 1
    },
    {
        question: "La trachea Ã¨ protetta da anelli diâ€¦",
        options: ["Osso", "Muscolo", "Cartilagine", "Pelle"],
        correct: 2
    },
    {
        question: "Come respirano le rane da adulte?",
        options: ["Solo con i polmoni", "Solo con le branchie", "Con polmoni e pelle", "Con le nasi"],
        correct: 2
    }
];

let currentQuestion = 0, score = 0;

function loadQuestion() {
    if (currentQuestion >= quizQuestions.length) { showQuizResults(); return; }
    const q = quizQuestions[currentQuestion];
    document.getElementById('question').textContent = q.question;
    const optDiv = document.getElementById('options');
    optDiv.innerHTML = '';
    q.options.forEach((opt, i) => {
        const div = document.createElement('div');
        div.className = 'quiz-option';
        div.textContent = opt;
        div.onclick = () => checkAnswer(i);
        optDiv.appendChild(div);
    });
    updateScore();
}

function checkAnswer(sel) {
    const q = quizQuestions[currentQuestion];
    const opts = document.querySelectorAll('.quiz-option');
    if (sel === q.correct) {
        opts[sel].classList.add('correct');
        score++;
        setTimeout(() => { currentQuestion++; loadQuestion(); }, 1500);
    } else {
        opts[sel].classList.add('wrong');
        opts[q.correct].classList.add('correct');
        setTimeout(() => { currentQuestion++; loadQuestion(); }, 2000);
    }
}

function updateScore() {
    document.getElementById('score').textContent = `Punteggio: ${score}/${currentQuestion}`;
}

function showQuizResults() {
    const pct = (score / quizQuestions.length) * 100;
    let msg = pct === 100 ? 'ğŸ† PERFETTO! Sei un esperto dei polmoni! ğŸŒŸ'
            : pct >= 70  ? 'ğŸ‰ Bravissimo! I polmoni non hanno segreti per te! ğŸ‘'
            : pct >= 50  ? 'ğŸ˜Š Buon lavoro! Continua a studiare! ğŸ“š'
                         : 'ğŸ’ª Dai, riprova! Diventerai un esperto! ğŸš€';
    document.getElementById('quiz-content').innerHTML = `
        <div style="text-align:center;">
            <h2 class="congrats">${msg}</h2>
            <p style="font-size:2.5rem;margin:30px 0;">Hai risposto correttamente a ${score} domande su ${quizQuestions.length}!</p>
            <p style="font-size:3rem;">${pct >= 70 ? 'ğŸŠğŸ‰ğŸˆ' : 'ğŸ“–ğŸ’¡ğŸ§ '}</p>
        </div>`;
}

function resetQuiz() {
    currentQuestion = 0; score = 0;
    document.getElementById('quiz-content').innerHTML =
        '<div class="quiz-question" id="question"></div><div class="quiz-options" id="options"></div>';
    loadQuestion();
}

/* ===== MEMORY GAME ===== */
const memCards = ['ğŸ«','ğŸ’¨','ğŸ«§','ğŸ‘ƒ','ğŸŒ³','ğŸ’ª','ğŸ¦‹','ğŸŒ¬ï¸'];
let gameCards = [], flipped = [], matched = 0, moves = 0;

function initMemoryGame() {
    matched = 0; moves = 0; flipped = [];
    gameCards = [...memCards, ...memCards].sort(() => Math.random() - 0.5);
    const grid = document.getElementById('memory-game');
    grid.innerHTML = '';
    gameCards.forEach((em) => {
        const card = document.createElement('div');
        card.className = 'memory-card';
        card.innerHTML = '<div class="front">â“</div><div class="back">' + em + '</div>';
        card.dataset.emoji = em;
        card.onclick = function(){ flipCard(this); };
        grid.appendChild(card);
    });
    document.getElementById('moves').textContent = 'Mosse: 0';
}

function flipCard(card) {
    if (flipped.length === 2) return;
    if (card.classList.contains('flipped')) return;
    card.classList.add('flipped');
    flipped.push(card);
    if (flipped.length === 2) {
        moves++;
        document.getElementById('moves').textContent = 'Mosse: ' + moves;
        checkMatch();
    }
}

function checkMatch() {
    if (flipped[0].dataset.emoji === flipped[1].dataset.emoji) {
        matched++;
        flipped = [];
        if (matched === memCards.length) {
            setTimeout(() => alert('ğŸ‰ HAI VINTO! Hai completato il gioco in ' + moves + ' mosse! ğŸ†'), 500);
        }
    } else {
        setTimeout(() => {
            flipped[0].classList.remove('flipped');
            flipped[1].classList.remove('flipped');
            flipped = [];
        }, 1000);
    }
}

/* init */
loadQuestion();
initMemoryGame();
</script>
</body>
</html>
